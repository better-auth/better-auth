---
title: Drizzle ORM Adapter
description: Integrate Better Auth with Drizzle ORM.
---

Drizzle ORM is a powerful and flexible ORM for Node.js and TypeScript. It provides a simple and intuitive API for working with databases, and supports a wide range of databases including MySQL, PostgreSQL, SQLite, and more.
Read more here: [Drizzle ORM](https://orm.drizzle.team/).

## Example Usage

Make sure you have Drizzle installed and configured.
Then, you can use the Drizzle adapter to connect to your database.

```ts title="auth.ts"
import { betterAuth } from "better-auth";
import { drizzleAdapter } from "better-auth/adapters/drizzle";
import { db } from "./database.ts";

export const auth = betterAuth({
  database: drizzleAdapter(db, {
    // [!code highlight]
    provider: "sqlite", // or "pg" or "mysql" // [!code highlight]
  }), // [!code highlight]
  //... the rest of your config
});
```

## Schema generation & migration

The [Better Auth CLI](/docs/concepts/cli) allows you to generate or migrate
your database schema based on your Better Auth configuration and plugins.

To generate the schema required by Better Auth, run the following command:

```bash title="Schema Generation"
npx @better-auth/cli@latest generate
```

For Drizzle, this will generate an `auth-schema.ts` file (by default in your project root, or at the path you pass via `--output`).
This file contains the Drizzle tables Better Auth needs (users, sessions, verification, etc.).

In most projects you will already have an existing Drizzle schema for your own tables.
You should **merge the Better Auth schema with your application schema** when creating the Drizzle `db` instance:

```ts title="db.ts"
import { drizzle } from "drizzle-orm/postgres-js";
import * as appSchema from "<path-to-your-app-schema>";
import * as authSchema from "./auth-schema"; // generated by the CLI

export const db = drizzle(client, {
  schema: {
    ...appSchema,
    ...authSchema,
  },
});
```

<Callout type="info">
Better Auth does not automatically merge its schema into your application schema. You must merge both schemas to ensure migrations include all required tables.
</Callout>

To generate and apply the migration, run the following commands:

```bash title="Schema Migration"
npx drizzle-kit generate # generate the migration file
npx drizzle-kit migrate # apply the migration
```

After running the migration, you can verify that the tables exist using Drizzle Studio:

```bash
npx drizzle-kit studio
```

You should see the Better Auth tables (for example: `user`, `session`, `verification`) alongside your own tables.


## Joins (Experimental)

Database joins is useful when Better-Auth needs to fetch related data from multiple tables in a single query.
Endpoints like `/get-session`, `/get-full-organization` and many others benefit greatly from this feature,
seeing upwards of 2x to 3x performance improvements depending on database latency.

The Drizzle adapter supports joins out of the box since version `1.4.0`.
To enable this feature, you need to set the `experimental.joins` option to `true` in your auth configuration.

```ts title="auth.ts"
export const auth = betterAuth({
  experimental: { joins: true }
});
```
<Callout type="warn">
  Please make sure that your Drizzle schema has the necessary relations defined.
  If you do not see any relations in your Drizzle schema, you can manually add them using the [`relation`](https://orm.drizzle.team/docs/relations) drizzle-orm function
  or run our latest CLI version `npx auth@latest generate` to generate a new Drizzle schema with the relations.

  Additionally, you're required to pass each [relation](https://orm.drizzle.team/docs/relations) through the drizzle adapter schema object.
</Callout>

## Modifying Table Names

The Drizzle adapter expects the schema you define to match the table names. If all your tables match (including the Better Auth generated schema), you can merge them as shown in the [Schema generation & migration](#schema-generation--migration) section above.

However, if your Drizzle schema maps the `user` table to `users` (or any other table name), you need to manually pass the schema and map it:

```ts
import { betterAuth } from "better-auth";
import { db } from "<path-to-your-drizzle-db>";
import { drizzleAdapter } from "better-auth/adapters/drizzle";
import * as appSchema from "<path-to-your-app-schema>";
import * as authSchema from "./auth-schema"; // generated Better Auth schema

const schema = {
  ...appSchema,
  ...authSchema,
  user: appSchema.users, // map Better Auth's 'user' to your app's 'users' table
};

export const auth = betterAuth({
  database: drizzleAdapter(db, {
    provider: "sqlite", // or "pg" or "mysql"
    schema,
  }),
});
```

You can either modify the provided schema values like the example above,
or you can mutate the auth config's `modelName` property directly.
For example:

```ts
export const auth = betterAuth({
  database: drizzleAdapter(db, {
    provider: "sqlite", // or "pg" or "mysql"
    schema,
  }),
  user: {
    modelName: "users", // [!code highlight]
  }
});
```

## Modifying Field Names

We map field names based on property you passed to your Drizzle schema.
For example, if you want to modify the `email` field to `email_address`,
you simply need to change the Drizzle schema to:

```ts
export const user = mysqlTable("user", {
  // Changed field name without changing the schema property name
  // This allows drizzle & better-auth to still use the original field name,
  // while your DB uses the modified field name
  email: varchar("email_address", { length: 255 }).notNull().unique(), // [!code highlight]
  // ... others
});
```

You can either modify the Drizzle schema like the example above,
or you can mutate the auth config's `fields` property directly.
For example:

```ts
export const auth = betterAuth({
  database: drizzleAdapter(db, {
    provider: "sqlite", // or "pg" or "mysql"
    schema,
  }),
  user: {
    fields: {
      email: "email_address", // [!code highlight]
    }
  }
});
```

## Using Plural Table Names

If all your tables are using plural form, you can just pass the `usePlural` option:

```ts
export const auth = betterAuth({
  database: drizzleAdapter(db, {
    ...
    usePlural: true,
  }),
});
```

## Performance Tips

If you're looking for performance improvements or tips, take a look at our guide to <Link href="/docs/guides/optimizing-for-performance">performance optimizations</Link>.
