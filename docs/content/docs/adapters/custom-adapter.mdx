---
title: Your Custom Adapter
description: Learn how to create a custom database adapter for Better-Auth
---

Learn how to create a custom database adapter for Better-Auth using `createAdapter`.

Our `createAdapter` function is designed to be very flexible, and we've done our best to make it easy to understand and use.
Our hope is to allow you to focus on writing database logic, and not have to worry about how the adapter is working with Better-Auth.

Anything from custom schema configurations, custom ID generation, safe JSON parsing, and more is handled by the `createAdapter` function.
All you need to do is provide the database logic, and the `createAdapter` function will handle the rest.

## Quick Start

<Steps>
<Step>
### Get things ready

1. Import `createAdapter`.
2. Create `CustomAdapterConfig` interface that represents your adapter config options.
3. Create the adapter!

```ts
import { createAdapter } from "better-auth/adapters";

// Your custom adapter config options
interface CustomAdapterConfig {
  /**
   * Helps you debug issues with the adapter.
   */
  enableDebugLogs?: boolean;
  /**
   * If the table names in the schema are plural.
   */
  usePlural?: boolean;
}

export const myAdapter = (config: CustomAdapterConfig = {}) =>
  createAdapter({
    // ...
  });
```

</Step>

<Step>
### Configure the adapter

The `config` object is mostly used to provide information about the adapter to Better-Auth.
We try to minimize the amount of code you need to write in your adapter functions, and these `config` options are used to help us do that.

```ts
// ...
export const myAdapter = (config: CustomAdapterConfig = {}) =>
  createAdapter({
    config: {
      adapterId: "custom-adapter", // A unique identifier for the adapter.
      adapterName: "Custom Adapter", // The name of the adapter.
      usePlural: config.usePlural ?? false, // Whether the table names in the schema are plural.
      debugLogs: config.enableDebugLogs ?? false, // Whether to enable debug logs.
      supportsJSON: true, // Whether the database supports JSON. (Default: true)
      supportsDates: true, // Whether the database supports dates. (Default: true)
      supportsBooleans: true, // Whether the database supports booleans. (Default: true)
    },
    // ...
  });
```

<Callout>
Learn more about the `config` object [here](/docs/adapters/custom-adapter#config).
</Callout>
</Step>

<Step>
### Create the adapter

The `adapter` function is where you write the code that interacts with your database.

```ts
// ...
export const myAdapter = (config: CustomAdapterConfig = {}) =>
  createAdapter({
    config: {
      // ...
    },
    adapter: ({}) => {
      return {
        create: async ({ data, model, select }) => {
          // ...
        },
        update: async ({ data, model, select }) => {
          // ...
        },
        updateMany: async ({ data, model, select }) => {
          // ...
        },
        delete: async ({ data, model, select }) => {
          // ...
        },
        // ...
      };
    },
  });
```

<Callout>
Learn more about the `adapter` function [here](/docs/adapters/custom-adapter#adapter).
</Callout>
</Step>

</Steps>

## Config

The `config` object is used to provide information about the adapter to Better-Auth.

<Accordions>
  <Accordion title="adapterId">
    The `adapterId` is a unique identifier for the adapter.
  </Accordion>
  <Accordion title="adapterName">
    The `adapterName` is the name of the adapter.
  </Accordion>
</Accordions>

Optional Config:

<Accordions>
<Accordion title="supportsJSON">
The `supportsJSON` option is used to indicate if the database supports JSON.

If the database doesn't support JSON, we will use a `string` to save the JSON data.
And when we retrieve the data, we will safely parse the `string` back into a JSON object.

Default: `true`

</Accordion>
<Accordion title="supportsDates">
The `supportsDates` option is used to indicate if the database supports dates.

If the database doesn't support dates, we will use a `string` to save the date. (ISO string)
When we retrieve the data, we will safely parse the `string` back into a `Date` object.

Default: `true`

</Accordion>
<Accordion title="supportsBooleans">
The `supportsBooleans` option is used to indicate if the database supports booleans.

If the database doesn't support booleans, we will use a `0` or `1` to save the boolean value.
When we retrieve the data, we will safely parse the `0` or `1` back into a boolean value.

Default: `true`

</Accordion>
<Accordion title="usePlural">
The `usePlural` option is used to indicate if the table names in the schema are plural.
This is often defined by the user, and passed down through your custom adapter options.

If you do not intend to allow the user to customize the table names, you can ignore this option, or set this to `false`.

```ts title="Example"
const adapter = myAdapter({
  // This value then gets passed into the `usePlural`
  // option in the createAdapter `config` object.
  usePlural: true,
});
```

Default: `false`

</Accordion>

<Accordion title="debugLogs">
The `debugLogs` option is used to enable debug logs for the adapter.

You can pass in a boolean, or an object with the following keys:

- `create`
- `update`
- `updateMany`
- `findOne`
- `findMany`
- `delete`
- `deleteMany`
- `count`

If any of the keys are `true`, the debug logs will be enabled for that method.

Default: `false`

</Accordion>

<Accordion title="disableIdGeneration">
The `disableIdGeneration` option is used to indicate if the database supports custom id generation.

Default: `false`

</Accordion>

<Accordion title="mapKeysTransformInput">
The `mapKeysTransformInput` option is used to map the keys of the input data.

This is useful for databases that expect a different key name for a given situation.

For example, MongoDB uses `_id` while in Better-Auth we use `id`.

Each key in the returned object represents the old key to replace.
The value represents the new key.

This can be a partial object that only transforms some keys.

```ts title="Example"
mapKeysTransformInput: () => {
  return {
    id: "_id", // We want to replace `id` to `_id` to save into MongoDB
  };
},
```

Default: `undefined`

</Accordion>
</Accordions>

## Adapter

## Test your adapter

We've provided a test suite that you can use to test your adapter. It requires you to use `vitest`.

```ts title="my-adapter.test.ts"
import { expect, test, describe } from "vitest";
import { runAdapterTest } from "better-auth/adapters/test";
import { myAdapter } from "./my-adapter";

describe("My Adapter Tests", async () => {
  afterAll(async () => {
    // Run DB cleanup here...
  });
  const adapter = myAdapter();

  await runAdapterTest({
    getAdapter: async (customOptions = {}) => {
      return adapter(customOptions);
    },
  });
});
```
