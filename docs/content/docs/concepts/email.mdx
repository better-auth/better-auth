---
title: Email
description: Learn how to use email with Better Auth.
---

Email is a key part of Better Auth, required for all users regardless of their authentication method. Better Auth provides email and password authentication out of the box, and a lot of utilities to help you manage email verification, password reset, and more.


## Email Verification

Email verification is a security feature that ensures users provide a valid email address. It helps prevent spam and abuse by confirming that the email address belongs to the user. Better Auth supports multiple email verification methods:

- **Link-based verification**: Users click a link in their email (token-based)
- **OTP-based verification**: Users enter a one-time code (see [Email OTP Plugin](/docs/plugins/email-otp))
- **Link + OTP verification**: Send both a link and OTP in the same email for flexible user experience

### Adding Email Verification to Your App

To enable email verification, you need to pass a function that sends a verification email with a link.

- **sendVerificationEmail**: This function is triggered when email verification starts. It accepts a data object with the following properties:
  - `user`: The user object containing the email address.
  - `url`: The verification URL the user must click to verify their email.
  - `token`: The verification token used to complete the email verification to be used when implementing a custom verification URL.
  - `otp` (optional): A one-time password code when `includeOTP` is enabled.

and a `request` object as the second parameter.

#### Link-only Verification (Default)

```ts title="auth.ts"
import { betterAuth } from 'better-auth';
import { sendEmail } from './email'; // your email sending function

export const auth = betterAuth({
    emailVerification: {
        sendVerificationEmail: async ({ user, url, token }, request) => {
            void sendEmail({
                to: user.email,
                subject: 'Verify your email address',
                text: `Click the link to verify your email: ${url}`
            })
        }
    }
})
```

#### Link + OTP Verification

You can enable OTP alongside the verification link to provide users with two verification methods in the same email. Simply set `includeOTP: true`:

```ts title="auth.ts"
import { betterAuth } from 'better-auth';
import { sendEmail } from './email'; // your email sending function

export const auth = betterAuth({
    emailVerification: {
        includeOTP: true,  // ðŸ‘ˆ That's it!
        sendVerificationEmail: async ({ user, url, otp }) => {
            void sendEmail({
                to: user.email,
                subject: 'Verify your email address',
                html: `
                    <h1>Verify Your Email</h1>
                    <p>Click the button to verify instantly:</p>
                    <a href="${url}" style="padding: 12px 24px; background: #0070f3; color: white;">
                        Verify Email
                    </a>
                    
                    <p>Or enter this code: <strong>${otp}</strong></p>
                `
            })
        }
    }
})
```

That's it! Now your users can choose:
- **Click the link** (instant verification)
- **Enter the code** `${otp}` (6-digit code by default)

Both methods work until expiration (1 hour by default).

<Callout type="info">
This is different from the [Email OTP Plugin](/docs/plugins/email-otp) which provides **OTP-only** authentication. Use `includeOTP` when you want to provide **both** link and OTP in the same email for better user experience.
</Callout>

**Optional Configuration:**

```ts
emailVerification: {
    includeOTP: true,
    otpLength: 8,      // Custom OTP length (default: 6)
    expiresIn: 7200,   // 2 hours (default: 3600)
}
```

<Callout type="warn">
  Avoid awaiting the email sending to prevent 
  timing attacks. On serverless platforms, use `waitUntil` or similar to ensure the email is sent.
</Callout>
### Triggering Email Verification

You can initiate email verification in several ways:

#### 1. During Sign-up

To automatically send a verification email at signup, set `emailVerification.sendOnSignUp` to `true`. 

```ts title="auth.ts"
import { betterAuth } from 'better-auth';

export const auth = betterAuth({
    emailVerification: {
        sendOnSignUp: true
    }
})
```

This sends a verification email when a user signs up. For social logins, email verification status is read from the SSO.

<Callout>
    With `sendOnSignUp` enabled, when the user logs in with an SSO that does not claim the email as verified, Better Auth will dispatch a verification email, but the verification is not required to login even when `requireEmailVerification` is enabled.
</Callout>

#### 2. Require Email Verification

If you enable require email verification, users must verify their email before they can log in. And every time a user tries to sign in, `sendVerificationEmail` is called.

<Callout>
    This only works if you have `sendVerificationEmail` implemented, if `sendOnSignIn` is set to true and if the user is trying to sign in with email and password.
</Callout>

```ts title="auth.ts"
export const auth = betterAuth({
  emailVerification: {
    sendVerificationEmail: async ({ user, url }) => {
      void sendEmail({
        to: user.email,
        subject: "Verify your email address",
        text: `Click the link to verify your email: ${url}`,
      });
    },
    sendOnSignIn: true,
  },
  emailAndPassword: {
    requireEmailVerification: true,
  },
});
```

If a user tries to sign in without verifying their email, you can handle the error and show a message to the user.

```ts title="auth-client.ts"
await authClient.signIn.email({
    email: "email@example.com",
    password: "password"
}, {
    onError: (ctx) => {
        // Handle the error
        if(ctx.error.status === 403) {
            alert("Please verify your email address")
        }
        //you can also show the original error message
        alert(ctx.error.message)
    }
})
```

#### 3. Manually

You can also manually trigger email verification by calling `sendVerificationEmail`.

```ts
await authClient.sendVerificationEmail({
    email: "user@email.com",
    callbackURL: "/" // The redirect URL after verification
})
```

### Verifying the Email

Better Auth supports multiple verification methods:

#### 1. Via Link (Default)

If the user clicks the provided verification URL, their email is automatically verified, and they are redirected to the `callbackURL`.

For manual verification, you can send the user a custom link with the `token` and call the `verifyEmail` function.

```ts
await authClient.verifyEmail({
    query: {
        token: "" // Pass the token here
    }
})
```

#### 2. Via OTP (When `includeOTP` is enabled)

When users receive the email with an OTP code, they can enter it on a verification page. Here's a complete example:

```tsx title="verify-email-otp.tsx"
"use client";

import { useState } from "react";
import { authClient } from "@/lib/auth-client";
import { useRouter } from "next/navigation";

export default function VerifyEmailWithOTP() {
  const [email, setEmail] = useState("");
  const [otp, setOtp] = useState("");
  const [error, setError] = useState("");
  const [isVerifying, setIsVerifying] = useState(false);
  const router = useRouter();

  const handleVerify = async (e: React.FormEvent) => {
    e.preventDefault();
    setIsVerifying(true);
    setError("");

    const { data, error: verifyError } = await authClient.verifyEmail.otp({
      email,
      otp,
    });

    if (verifyError) {
      setError(verifyError.message || "Invalid OTP");
      setIsVerifying(false);
    } else {
      // Email verified successfully! If autoSignInAfterVerification is enabled, the session is updated.
      router.push("/dashboard");
    }
  };

  return (
    <form onSubmit={handleVerify}>
      <input
        type="email"
        placeholder="Email"
        value={email}
        onChange={(e) => setEmail(e.target.value)}
        required
      />
      <input
        type="text"
        placeholder="Enter 6-digit code"
        value={otp}
        onChange={(e) => setOtp(e.target.value)}
        maxLength={6}
        required
      />
      <button type="submit" disabled={isVerifying}>
        {isVerifying ? "Verifying..." : "Verify Email"}
      </button>
      {error && <p>{error}</p>}
    </form>
  );
}
```

After successful verification:
- The user's `emailVerified` status is updated to `true`
- If `autoSignInAfterVerification` is enabled, the user is automatically signed in and the session is updated on the client

### Auto Sign In After Verification

To sign in the user automatically after they successfully verify their email, set the `autoSignInAfterVerification` option to `true`:

```ts
const auth = betterAuth({
    //...your other options
    emailVerification: {
        autoSignInAfterVerification: true
    }
})
```

### Callback after successful email verification

You can run custom code immediately after a user verifies their email using the `afterEmailVerification` callback. This is useful for any side-effects you want to trigger, like granting access to special features or logging the event.

The `afterEmailVerification` function runs automatically when a user's email is confirmed, receiving the `user` object and `request` details so you can perform actions for that specific user.

Here's how you can set it up:

```ts title="auth.ts"
import { betterAuth } from 'better-auth';

export const auth = betterAuth({
    emailVerification: {
        async afterEmailVerification(user, request) {
            // Your custom logic here, e.g., grant access to premium features
            console.log(`${user.email} has been successfully verified!`);
        }
    }
})
```

## Password Reset Email

Password reset allows users to reset their password if they forget it. Better Auth provides a simple way to implement password reset functionality.

You can enable password reset by passing a function that sends a password reset email with a link.

```ts title="auth.ts"
import { betterAuth } from 'better-auth';
import { sendEmail } from './email'; // your email sending function

export const auth = betterAuth({
    emailAndPassword: {
        enabled: true,
        sendResetPassword: async ({ user, url, token }, request) => {
            void sendEmail({
                to: user.email,
                subject: 'Reset your password',
                text: `Click the link to reset your password: ${url}`
            })
        }
    }
})
```

<Callout type="warn">
  Avoid awaiting the email sending to prevent 
  timing attacks. On serverless platforms, use `waitUntil` or similar to ensure the email is sent.
</Callout>

Check out the [Email and Password](/docs/authentication/email-password#forget-password) guide for more details on how to implement password reset in your app.
Also you can check out the [Otp verification](/docs/plugins/email-otp#reset-password) guide for how to implement password reset with OTP in your app.
