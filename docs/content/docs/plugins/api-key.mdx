---
title: API Key
description: API Key plugin for Better Auth.
---



The username plugin wraps the email and password authenticator and adds username support. This allows users to sign in and sign up with their username instead of their email.

## Installation

<Steps>
    <Step>
        ### Add Plugin to the server

        ```ts title="auth.ts" 
        import { betterAuth } from "better-auth"
        import { apiKey } from "better-auth/plugins"

        const auth = betterAuth({
            plugins: [ // [!code highlight]
                apiKey() // [!code highlight]
            ] // [!code highlight]
        })
        ```
    </Step>
    <Step>
        ### Migrate the database

        Run the migration or generate the schema to add the necessary fields and tables to the database.

        <Tabs items={["migrate", "generate"]}>
            <Tab value="migrate">
            ```bash
            npx @better-auth/cli migrate
            ```
            </Tab>
            <Tab value="generate">
            ```bash
            npx @better-auth/cli generate
            ```
            </Tab>
        </Tabs>
        See the [Schema](#schema) section to add the fields manually.
    </Step>
    <Step>
        ### Add the client plugin
        
        ```ts title="auth-client.ts"
        import { createAuthClient } from "better-auth/client"
        import { usernameClient } from "better-auth/client/plugins"
        
        const authClient = createAuthClient({
            plugins: [ // [!code highlight]
                usernameClient() // [!code highlight]
            ] // [!code highlight]
        })
        ```
    </Step>
</Steps>

## Usage

### Signup with username

To sign up a user with username, you can use the existing `signUp.email` function provided by the client. The `signUp` function should take a new `username` property in the object.

```ts title="auth-client.ts"
const data = await authClient.signUp.email({
    email: "email@domain.com",
    name: "Test User",
    password: "password1234",
    username: "test"
})
```

### Signin with username

To signin a user with username, you can use the `signIn.username` function provided by the client. The `signIn` function takes an object with the following properties:

- `username`: The username of the user.
- `password`: The password of the user.

```ts title="auth-client.ts" 
const data = await authClient.signIn.username({
    username: "test",
    password: "password1234",
})
```

### Update username

To update the username of a user, you can use the `updateUser` function provided by the client.

```ts title="auth-client.ts"
const data = await authClient.updateUser({
    username: "new-username"
})
```

## Schema

Table: `apiKeys`

<DatabaseTable
    fields={[
        { 
            name: "id", 
            type: "string", 
            description: "The ID of the api key",
            isUnique: true,
            isPrimaryKey: true
        },
        {
            name: "createdAt",
            type: "Date",
            description: "The date and time the API key was created",
        },
        {
            name: "updatedAt",
            type: "Date",
            description: "The date and time the API key was updated",
        },
        {
            name: "remaining",
            type: "number",
            description: "The number of requests remaining",
            isOptional: true,
        },
        {
            name: "key",
            type: "string",
            description: "The API key itself",
        },
        {
            name: "identifier",
            type: "string",
            description: "The identifier of the API key",
        },
        {
            name: "ownerId",
            type: "string",
            description: "The ID of the user who owns the API key",
            isForeignKey: true,
            isOptional: true,
        },
        {
            name: "expires",
            type: "number",
            description: "The expiration date of the API key in Unix timestamp format",
            isOptional: true
        },
        {
            name: "name",
            type: "string",
            description: "The name of the API key",
            isOptional: true
        },
        {
            name: "isEnabled",
            type: "boolean",
            description: "Whether the API key is enabled",
        }
    ]}
/>
