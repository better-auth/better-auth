---
title: Google
description: Google provider setup and usage.
---

<Steps>
    <Step> 
        ### Get your Google credentials
        To use Google as a social provider, you need to get your Google credentials. You can get them by creating a new project in the [Google Cloud Console](https://console.cloud.google.com/apis/dashboard).

        In the Google Cloud Console > Credentials > Authorized redirect URIs, make sure to set the redirect URL to `http://localhost:3000/api/auth/callback/google` for local development. For production, make sure to set the redirect URL as your application domain, e.g. `https://example.com/api/auth/callback/google`. If you change the base path of the auth routes, you should update the redirect URL accordingly.

        <Callout type="info">
        **Creating Your Google OAuth Credentials**

        If you haven't created OAuth credentials yet, follow these step-by-step instructions:

        1. Open **Google Cloud Console** → **APIs & Services** → **Credentials**
        2. Click **Create Credentials** → **OAuth client ID**
        3. Choose **Web application**
        4. Add your redirect URIs:
           - `http://localhost:3000/api/auth/callback/google` (for local development)
           - `https://your-domain.com/api/auth/callback/google` (for production)
        5. Copy the **Client ID** and **Client Secret** into your environment variables

        These steps avoid common issues such as `redirect_uri_mismatch`.
        </Callout>
    </Step>

  <Step>
        ### Configure the provider
        To configure the provider, you need to pass the `clientId` and `clientSecret` to `socialProviders.google` in your auth configuration.

        ```ts title="auth.ts"
        import { betterAuth } from "better-auth"

        export const auth = betterAuth({
            baseURL: process.env.BETTER_AUTH_URL, // [!code highlight]
            socialProviders: {
                google: { // [!code highlight]
                    clientId: process.env.GOOGLE_CLIENT_ID as string, // [!code highlight]
                    clientSecret: process.env.GOOGLE_CLIENT_SECRET as string, // [!code highlight]
                }, // [!code highlight]
            },
        })
        ```
        <Callout type="warn">
        **Important: Set Your Base URL**

        You must configure the `baseURL` to avoid `redirect_uri_mismatch` errors. Better Auth uses this to construct the OAuth callback URL sent to Google.

        **Option 1: Environment Variable (Recommended)**

        Add to your `.env` file:
        ```dotenv
        BETTER_AUTH_URL=https://your-domain.com
        ```

        **Option 2: Explicit Configuration**

        Pass `baseURL` directly in the auth config as shown above.
        Without this, the callback URL may default to `localhost`, causing Google OAuth to fail in production.
        </Callout>
    </Step>

</Steps>

## Usage

### Sign In with Google

To sign in with Google, you can use the `signIn.social` function provided by the client. The `signIn` function takes an object with the following properties:

- `provider`: The provider to use. It should be set to `google`.

```ts title="auth-client.ts"  /
import { createAuthClient } from "better-auth/client";
const authClient = createAuthClient();

const signIn = async () => {
  const data = await authClient.signIn.social({
    provider: "google",
  });
};
```

### Sign In with Google With ID Token

To sign in with Google using the ID Token, you can use the `signIn.social` function to pass the ID Token.

This is useful when you have the ID Token from Google on the client-side and want to use it to sign in on the server.

<Callout>
  If ID token is provided no redirection will happen, and the user will be
  signed in directly.
</Callout>

```ts title="auth-client.ts"
const data = await authClient.signIn.social({
    provider: "google",
    idToken: {
        token: // Google ID Token,
        accessToken: // Google Access Token
    }
})
```

<Callout>
  If you want to use google one tap, you can use the [One Tap
  Plugin](/docs/plugins/one-tap) guide.
</Callout>

### Always ask to select an account

If you want to always ask the user to select an account, you pass the `prompt` parameter to the provider, setting it to `select_account`.

```ts
socialProviders: {
    google: {
        prompt: "select_account", // [!code highlight]
        clientId: process.env.GOOGLE_CLIENT_ID as string,
        clientSecret: process.env.GOOGLE_CLIENT_SECRET as string,
    },
}
```

### Requesting Additional Google Scopes

If your application needs additional Google scopes after the user has already signed up (e.g., for Google Drive, Gmail, or other Google services), you can request them using the `linkSocial` method with the same Google provider.

```tsx title="auth-client.ts"
const requestGoogleDriveAccess = async () => {
  await authClient.linkSocial({
    provider: "google",
    scopes: ["https://www.googleapis.com/auth/drive.file"],
  });
};

// Example usage in a React component
return (
  <button onClick={requestGoogleDriveAccess}>
    Add Google Drive Permissions
  </button>
);
```

This will trigger a new OAuth flow that requests the additional scopes. After completion, your account will have the new scope in the database, and the access token will give you access to the requested Google APIs.

<Callout>
  Ensure you're using Better Auth version 1.2.7 or later to avoid "Social
  account already linked" errors when requesting additional scopes from the same
  provider.
</Callout>

### Always get refresh token

Google only issues a refresh token the first time a user consents to your app.
If the user has already authorized your app, subsequent OAuth flows will only return an access token, not a refresh token.

To always get a refresh token, you can set the `accessType` to `offline`, and `prompt` to `select_account consent` in the provider options.

```ts
socialProviders: {
    google: {
        clientId: process.env.GOOGLE_CLIENT_ID as string,
        clientSecret: process.env.GOOGLE_CLIENT_SECRET as string,
        accessType: "offline", // [!code highlight]
        prompt: "select_account consent", // [!code highlight]
    },
}
```

<Callout>
  **Revoking Access:** If you want to get a new refresh token for a user who has
  already authorized your app, you must have them revoke your app's access in
  their Google account settings, then re-authorize.
</Callout>

### Supporting Multiple Platforms (Android, iOS, Web)

When building apps with native mobile platforms (Android, iOS) alongside a web application, you'll need separate OAuth client IDs for each platform. Better Auth supports this by allowing `clientId` to be an array of client IDs.

#### Setup Steps

1. **Create OAuth Client IDs in Google Cloud Console**
   - Create a **Web Application** client ID for your web app
   - Create an **Android** client ID (provide your SHA-1 certificate fingerprint)
   - Create an **iOS** client ID (provide your iOS bundle ID)

2. **Configure Better Auth with all client IDs**

Pass an array of client IDs to the `clientId` option. The first client ID will be used for OAuth flows, and all client IDs will be validated when verifying ID tokens.

```ts title="auth.ts"
socialProviders: {
    google: {
        clientId: [ // [!code highlight]
            process.env.GOOGLE_CLIENT_ID as string, // Web (used for OAuth flows) // [!code highlight]
            process.env.GOOGLE_ANDROID_CLIENT_ID as string, // Android // [!code highlight]
            process.env.GOOGLE_IOS_CLIENT_ID as string, // iOS // [!code highlight]
        ], // [!code highlight]
        clientSecret: process.env.GOOGLE_CLIENT_SECRET as string,
    },
}
```

3. **Use with Native SDKs**

When using native Google Sign-In SDKs (e.g., `@react-native-google-signin/google-signin` or Google Sign-In for iOS/Android), users sign in with the platform-specific client ID on the native side, and then you pass the ID token to Better Auth:

```ts title="Mobile App"
// After native Google Sign-In
const { idToken, accessToken } = await GoogleSignin.signIn();

// Send to Better Auth
await authClient.signIn.social({
    provider: "google",
    idToken: {
        token: idToken,
        accessToken: accessToken,
    }
});
```

Better Auth will verify the token was issued by any of your configured client IDs (web, Android, or iOS).

<Callout type="info">
  **How it works:** When verifying ID tokens, Better Auth checks the token's `aud` (audience) claim against all configured client IDs. This allows tokens from any of your platforms to be accepted, enabling seamless cross-platform authentication.
</Callout>

#### Skip Nonce Check (Development Only)

Some native mobile SDKs don't support nonce verification. For development purposes, you can skip nonce validation:

```ts title="auth.ts"
socialProviders: {
    google: {
        clientId: [
            process.env.GOOGLE_CLIENT_ID as string,
            process.env.GOOGLE_ANDROID_CLIENT_ID as string,
            process.env.GOOGLE_IOS_CLIENT_ID as string,
        ],
        clientSecret: process.env.GOOGLE_CLIENT_SECRET as string,
        skipNonceCheck: process.env.NODE_ENV === "development", // [!code highlight]
    },
}
```

<Callout type="warn">
  **Security Warning:** Only enable `skipNonceCheck` in development environments. Nonce verification helps prevent replay attacks and should be enabled in production.
</Callout>
